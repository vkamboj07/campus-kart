<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampusKart - Cart</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="cart.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <!-- Top Header -->
    <div class="top-header">
        <div class="container">
            <div class="top-header-content">
                <span class="promo-text">Back to college sale, upto 50% OFF on your first rent</span>
                <div class="top-header-right">
                    <span class="rent-now">Rent Now</span>
                    <div class="language-selector">
                        <span>English</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>CampusKart</h1>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="login.html">Sign Up</a></li>
                    </ul>
                </nav>
                <div class="header-actions">
                    <div class="search-bar">
                        <input type="text" placeholder="What are you looking for?">
                        <span class="search-icon">üîç</span>
                    </div>
                    <div class="header-icons">
                        <a href="./wishlist.html" style="text-decoration: none;">
                            <span class="icon wishlist-icon">‚ù§Ô∏è <span class="badge" style="display: none;">0</span></span>
                        </a>
                        <a href="./cart.html" style="text-decoration: none;">
                            <span class="icon cart-icon">üõí <span class="badge" style="display: none;">0</span></span>
                        </a>
                        <div class="profile-dropdown">
                            <span class="icon profile-icon">üë§</span>
                            <div class="dropdown-menu">
                                <a href="account.html" class="dropdown-item" id="manage-account-link">
                                    <span class="dropdown-icon">üë§</span>
                                    Manage My Account
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Breadcrumbs -->
    <div class="breadcrumbs">
        <div class="container">
            <span>Home / Cart</span>
        </div>
    </div>

    <!-- Cart Section -->
    <section class="cart-section">
        <div class="container">
            <div class="cart-content">
                <div class="cart-items">
                    <div class="cart-table">
                        <div class="cart-header" id="cart-header">
                            <div class="col-product">Product</div>
                            <div class="col-price">Price</div>
                            <div class="col-quantity">Quantity</div>
                            <div class="col-subtotal">Subtotal</div>
                        </div>
                        
                        <div id="cart-items-container">
                            <!-- Cart items will be dynamically loaded here -->
                        </div>
                    </div>
                    
                    <div class="cart-actions">
                        <button class="return-btn">Return To Shop</button>
                        <button class="update-btn">Update Cart</button>
                    </div>
                    
                    <div class="coupon-section">
                        <input type="text" placeholder="Coupon Code" class="coupon-input">
                        <button class="apply-coupon-btn">Apply Coupon</button>
                    </div>
                </div>
                
                <div class="cart-summary">
                    <div class="summary-card">
                        <h3>Cart Total</h3>
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="cart-subtotal">‚Çπ0</span>
                        </div>
                        <div class="summary-row">
                            <span>Our Fee:</span>
                            <span>Free</span>
                        </div>
                        <div class="summary-row total">
                            <span>Total:</span>
                            <span id="cart-total">‚Çπ0</span>
                        </div>
                        <button class="checkout-btn">Proceed to checkout</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer (Unified) -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Exclusive</h3>
                    <p class="footer-subtitle">About Us</p>
                    <p>We provide the best campus essentials at student-friendly prices.</p>
                    <p class="footer-subtitle" style="margin-top:16px;">Subscribe</p>
                    <p>Get 10% off your first order</p>
                    <div class="newsletter">
                        <input type="email" placeholder="Enter your email">
                        <button aria-label="Send"></button>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Support</h3>
                    <p>111 Bijoy sarani, Dhaka, DH 1515, Bangladesh.</p>
                    <p>exclusive@gmail.com</p>
                    <p>+88015-88888-9999</p>
                </div>
                <div class="footer-section">
                    <h3>Account</h3>
                    <ul>
                        <li><a href="#">My Account</a></li>
                        <li><a href="#">Login / Register</a></li>
                        <li><a href="#">Cart</a></li>
                        <li><a href="#">Wishlist</a></li>
                        <li><a href="#">Shop</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Quick Link</h3>
                    <ul>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms Of Use</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Download App</h3>
                    <p>Save $3 with App New User Only</p>
                    <div class="qr-and-badges">
                        <div class="qr-code">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/8/8f/Qr-2.png" alt="QR Code">
                        </div>
                        <div class="store-badges">
                            <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on the App Store">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Get it on Google Play">
                        </div>
                    </div>
                    <div class="social-icons">
                        <a href="#" aria-label="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fa-brands fa-x-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fa-brands fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>¬© Copyright Rimel 2022. All right reserved</p>
            </div>
        </div>
    </footer>

<script>
// Cart functionality
let cart = JSON.parse(localStorage.getItem("cart")) || [];

// Initialize cart display
function initCart() {
    displayCartItems();
    updateCartSummary();
    updateCartBadge();
}

// Display cart items
function displayCartItems() {
    const container = document.getElementById("cart-items-container");
    const header = document.getElementById("cart-header");
    
    if (cart.length === 0) {
        container.innerHTML = `
            <div style="padding: 40px; text-align: center; color: #666;">
                <p style="font-size: 18px; margin-bottom: 20px;">Your cart is empty</p>
                <a href="index.html" style="color: #e74c3c; text-decoration: none;">Continue Shopping</a>
            </div>
        `;
        if (header) header.style.display = "none";
        return;
    }
    
    if (header) header.style.display = "grid";
    
    container.innerHTML = cart.map((item, index) => `
        <div class="cart-item" data-index="${index}">
            <div class="product-info">
                <img src="${item.image || 'https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?w=80&h=80&fit=crop'}" alt="${item.name}">
                <span>${item.name}</span>
            </div>
            <div class="price">‚Çπ${item.price}</div>
            <div class="quantity">
                <button class="qty-btn minus" onclick="updateQuantity(${index}, -1)">-</button>
                <input type="number" value="${item.quantity}" min="1" onchange="updateQuantityInput(${index}, this.value)">
                <button class="qty-btn plus" onclick="updateQuantity(${index}, 1)">+</button>
            </div>
            <div class="subtotal">‚Çπ${item.price * item.quantity}</div>
            <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
        </div>
    `).join('');
}

// Update quantity
function updateQuantity(index, change) {
    cart[index].quantity = Math.max(1, cart[index].quantity + change);
    saveCart();
    displayCartItems();
    updateCartSummary();
    updateCartBadge();
}

// Update quantity from input
function updateQuantityInput(index, value) {
    const qty = parseInt(value) || 1;
    cart[index].quantity = Math.max(1, qty);
    saveCart();
    displayCartItems();
    updateCartSummary();
    updateCartBadge();
}

// Remove item
function removeItem(index) {
    if (confirm("Are you sure you want to remove this item?")) {
        cart.splice(index, 1);
        saveCart();
        displayCartItems();
        updateCartSummary();
        updateCartBadge();
    }
}

// Update cart summary
function updateCartSummary() {
    const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    document.getElementById("cart-subtotal").textContent = `‚Çπ${subtotal}`;
    document.getElementById("cart-total").textContent = `‚Çπ${subtotal}`;
}

// Save cart to localStorage
function saveCart() {
    localStorage.setItem("cart", JSON.stringify(cart));
}

// Update cart badge in header
function updateCartBadge() {
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    const badges = document.querySelectorAll(".cart-icon .badge");
    badges.forEach(badge => {
        if (badge) {
            badge.textContent = totalItems;
            badge.style.display = totalItems > 0 ? "flex" : "none";
        }
    });
}

// Return to shop
document.querySelector(".return-btn")?.addEventListener("click", () => {
    window.location.href = "index.html";
});

// Update cart button
document.querySelector(".update-btn")?.addEventListener("click", () => {
    saveCart();
    alert("Cart updated successfully!");
});

// Apply coupon
document.querySelector(".apply-coupon-btn")?.addEventListener("click", () => {
    const couponCode = document.querySelector(".coupon-input").value;
    if (couponCode) {
        alert("Coupon code applied! (This is a demo)");
    } else {
        alert("Please enter a coupon code");
    }
});

// Checkout
document.querySelector(".checkout-btn")?.addEventListener("click", () => {
    if (cart.length === 0) {
        alert("Your cart is empty!");
        return;
    }
    window.location.href = "checkout.html";
});

// Initialize cart on page load
initCart();

// Also update badge on page load
updateCartBadge();

// Update wishlist badge
function updateWishlistBadge() {
    const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
    const badges = document.querySelectorAll(".wishlist-icon .badge");
    badges.forEach(badge => {
        if (badge) {
            badge.textContent = wishlist.length;
            badge.style.display = wishlist.length > 0 ? "flex" : "none";
        }
    });
}

updateWishlistBadge();
</script>

</body>
</html>